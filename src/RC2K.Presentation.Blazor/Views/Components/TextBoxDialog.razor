@using RC2K.DomainModel
@using RC2K.Logic
@using RC2K.Logic.Interfaces
@using RC2K.Presentation.Blazor.ViewModels
@using RC2K.Presentation.Blazor.Views.Layout
@rendermode InteractiveServer
@inject IStageService StageService
@inject ITimeEntryService TimeEntryService
@inject IDriverService DriverService
@inject ICarService CarService
@inject IPointsProvider PointsProvider
@inject IJSRuntime JSRuntime;
@inject NavigationManager NavigationManager
@inject ISnackbar Snackbar
@inject IUserService UserService


<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            @_title
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudText>@_msg</MudText>
        <MudTextField T="string"
                      Label="@_textBoxLabel"
                      @bind-Value="TextBoxValue" />
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">@_cancel</MudButton>
        <MudButton Color="Color.Primary" OnClick="Ok">@_yes</MudButton>
    </DialogActions>
</MudDialog>

@code {

    private string _title;
    private string _msg;
    private string _textBoxLabel;
    private string _yes;
    private string _cancel;
    public TextBoxDialog(string title, string msg, string textBoxLabel, string yes = "Yes", string cancel = "Cancel")
    {
        _title = title;
        _msg = msg;
        _textBoxLabel = textBoxLabel;
        _yes = yes;
        _cancel = cancel;
    }


    [CascadingParameter]
    public required IMudDialogInstance MudDialog { get; set; }

    public string TextBoxValue { get; set; }

    private void Cancel() => MudDialog.Cancel();

    private void Ok()
    {
        MudDialog.Close(DialogResult.Ok(TextBoxValue));
    }
}
