@rendermode InteractiveServer

@page "/ranking"
@page "/ranking/{action}"

@using RC2K.DataAccess.Interfaces
@using RC2K.DataAccess.Interfaces.Repositories
@using RC2K.DomainModel
@using RC2K.Logic.Interfaces
@using RC2K.Presentation.Blazor.ViewModels;
@using RC2K.Presentation.Blazor.Views.Components

@inject IRankingService RankingService;

<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<RankingList />

@code
{
  [Parameter]
  public string? Action { get; set; }

  protected override async Task OnInitializedAsync()
  {
    if (Action == "snapshot")
    {
      await RankingService.DoRankingSnapshot();
      return;
    }

    return;
  }
}
